\documentclass[12pt]{article}

\newcommand{\given}{\,|\,}
\newcommand{\dd}{\mathrm d}

\begin{document}

\paragraph{To Abade from Hogg:}
Imagine that you have a sample of $M$ galaxies $m$, for each of which
you have taken data $D_m$, which is a set of photometry and possibly
also other information, including perhaps morphology, or even
spectroscopy.  Each $D_m$ is a multi-dimensional vector or list or
blob of measurements, for which you also have a blob of uncertainty
information $I_m$ (this includes a noise model or uncertainty
estimates).

Different galaxies will, in general, have different measured
quantities.  You can think of this in two different ways: In one, you
put an entry in $D_m$ for every measurement you \emph{could} have, but
then put zeros into the inverse variance $1/\sigma^2$ entries in $I_m$
for the measurements you don't, in fact, have.  In the other, each
blob $D_n$ (and each associated $I_n$) is different for every object.
I think this is a pure implementation detail; I will try to make sure
everything (below) works either way.

There are two projects.  In the first, we try to use exceedingly bad
spectra to improve redshift estimates.  In the second, we infer the
redshift distribution of very faint galaxies using everything we have
got.

If you have a standard photometric-redshift scheme, it can return for
you, for each galaxy $m$, what is called a likelihood $p(D_m \given
z_m,\alpha_m,I_m)$.  This is the probability of the data $D_m$ given a
hypothesized redshift $z_m$, and some nuisance parameters (maybe SED
In a standard kind of analysis, the likelihood is related to some kind
of chi-squared by
\begin{eqnarray}
\ln p(D_m \given z_m, \alpha_m, I_m) &=& -\frac{1}{2}\,\chi^2
\quad,
\end{eqnarray}
where $\chi^2$ is the inverse-variance weighted total square residual
of the model (at redshift $z_m$ and given SED parameters $\alpha_m$);
it is a function of the data, the model parameters, and the
uncertainty information.

If you are a Bayesian, you have more than that, because you have some
prior $p(\alpha \given z)$ over the SED parameters $\alpha$ (at least)
at any redshift $z$, and a prior over redshifts $z$.  With these, you
can do things like
\begin{eqnarray}
p(D_m \given z_m, I_m) &=& \int p(D_m \given z_m, \alpha_m, I_m)\,\dd \alpha_m
\\
p(z_m \given D_m, I_m) &=& \frac{1}{Z_m}\,p(D_m \given z_m, I_m)\,p(z_m)
\\
Z_m &\equiv& \int p(D_m \given z_m, I_m)\,p(z_m)\,\dd z_m
\quad ,
\end{eqnarray}
where the first is the marginalized likelihood (we got rid of
$\alpha_m$ by integrating), the second is the marginalized posterior
PDF for $z_m$ (we obtained by Bayes's rule), and the third is a
normalization constant necessary to make the posterior PDF correct.

\end{document}
